<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script src="scripts/apparence.js" type="text/javascript"></script>
    <link rel="Stylesheet" href="styles/Global.css" type="text/css" />
    <link title="Light mode" href="scripts/bootstrap-sncf-metier/bootstrap-sncf.min.css" rel="stylesheet">
    <link title="Dark mode" href="scripts/bootstrap-sncf-metier/bootstrap-sncf.darkmode.min.css" rel="stylesheet alternate">
    <link rel="icon" href="images/favicon.png" size="16x16" type="image/png" />
    <link rel="icon" href="images/favicon.png" size="32x32" type="image/png" />
    <title>InfoGare - Profil</title>
</head>
<body onload="checkLogin(); loadInfos(); createLoader();" class="light">
<div>
    <nav role="navigation" class="mastnav">
  <ul class="mastnav-top">
    <li>
        <a href="index.htm" class="mastnav-item">
            <i class="icons-large-building icons-size-1x5" aria-hidden="true"></i>
            <span class="font-weight-medium">Accueil</span>
        </a>
    </li>
    <li>
      <a href="gares.htm" class="mastnav-item">
        <i class="icons-file icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Mes gares</span>
      </a>
    </li>
    <li>
      <a href="#" class="mastnav-item active">
        <i class="icons-menu-account icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Mon profil</span>
      </a>
    </li>
    <li id="mnu_login" hidden>
      <a href="login.htm" class="mastnav-item">
        <i class="icons-circle-account-connected icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Se connecter</span>
      </a>
    </li>
    <li class="d-lg-none">
      <button type="button" class="mastnav-item options-menu-btn" data-component="state" data-state="active, active" data-behaviour="toggle, toggle" data-target=".options-menu-btn, .options-menu">
        <i class="icons-options icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Plus</span>
      </button>
    </li>
  </ul>
  <div class="mastnav-bottom d-none d-lg-block">
    <a href="#" class="mastnav-item mastnav-item-horizontal">
      <i class="icons-circle-reverse icons-size-1x5" aria-hidden="true"></i>
      <span class="font-weight-medium" onclick="toggleDarkmode();">Mode sombre</span>
    </a>
  </div>
</nav>
</div>

<div class="main-content">
  <marquee id="loader" scrollamount="15"><img id="caisse-1"><img id="caisse-2"><img id="caisse-3"></marquee>
  <div id="content" hidden>
    <i class="icons-circle-account-connected icons-size-140px"></i>
    <br /><br>
    <h1 id="username"></h1>
    <h3 id="email"></h3>
    <br />
    <button type=button class="btn btn-danger" data-toggle="modal" data-target="#logout">Se déconnecter</button>
    <br /><br />
    <h1>Paramètres</h1>

    <button class="btn btn-primary" id="chg_pass" data-toggle="modal" data-target="#chg_password">Changer de mot de passe</button>
    <br><br>
    
    <label for="param1">Ouvrir les écrans dans </label>
    <div class="options-control">
      <div class="options-item">
        <input type="radio" name="optionsRadio" id="openinwindow" class="sr-only" onclick="modifParams();" checked/>
        <label class="options-btn font-weight-medium" for="openinwindow">Une fênetre à part</label>
      </div>
      <div class="options-item">
        <input type="radio" name="optionsRadio" id="openintab" class="sr-only" onclick="modifParams();"/>
        <label class="options-btn font-weight-medium" for="openintab">Un nouvel onglet</label>
      </div>
    </div>
    <br><br>
    <label for="param2">Ouvrir automatiquement le panneau de contrôle</label>
    <div class="options-control">
      <div class="options-item">
        <input type="radio" name="optionsRadio2" id="activated" class="sr-only" onclick="modifParams();" >
        <label class="options-btn font-weight-medium" for="activated">Activé</label>
      </div>
      <div class="options-item">
        <input type="radio" name="optionsRadio2" id="desactivated" class="sr-only" onclick="modifParams();" checked>
        <label class="options-btn font-weight-medium" for="desactivated">Désactivé</label>
      </div>
    </div>

    <label for="param3">Livrée des trains de chargement</label>
    <div class="select-improved" data-component="select-exclusive">
      <div class="select-control">
        <div class="input-group" data-role="select-toggle">
          <div class="form-control" data-role="placeholder" data-selected-prefix="Sélection actuelle">
            Sélectionner une livrée
          </div>
          <select class="sr-only" id="param3" data-role="input" tabindex="-1" aria-hidden="true">
            <option data-id="0">Neutre</option>
            <option data-id="1">Alsace</option>
            <option data-id="2">Aquitaine</option>
            <option data-id="3">Auvergne</option>
            <option data-id="4">Basse Normandie</option>
            <option data-id="5">Bourgogne</option>
            <option data-id="6">Bretagne</option>
            <option data-id="7">Centre</option>
            <option data-id="8">Champagne Ardenne</option>
            <option data-id="9">Franche Comté</option>
            <option data-id="10">Haute Normandie</option>
            <option data-id="11">Languedoc Roussillon</option>
            <option data-id="12">Limousin</option>
            <option data-id="13">Lorraine</option>
            <option data-id="14">Midi Pyrénées</option>
            <option data-id="15">Nord pas de Calais</option>
            <option data-id="16">PACA</option>
            <option data-id="17">Pays de la Loire</option>
            <option data-id="18">Picardie</option>
            <option data-id="19">Poitou Charente</option>
            <option data-id="20">Rhône Alpes</option>
          </select>
          <div class="input-group-append input-group-last">
            <button class="btn btn-primary btn-only-icon" data-role="btn" type="button" aria-expanded="false" aria-controls="selectgrouptoggle">
              <i class="icons-arrow-down icons-size-x75" aria-hidden="true"></i>
            </button>
          </div>
        </div>
        <div class="select-menu" role="list" data-role="menu" id="selectgrouptoggle">
          <div role="listitem" class="select-group">
            <div class="select-group-head">
              <span class="select-group-title text-uppercase">Neutre</span>
            </div>
            <div class="select-group-content" role="list">
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="0">Neutre</button></span>
            </div>
          </div>
          <div role="listitem" class="select-group">
            <div class="select-group-head">
              <span class="select-group-title text-uppercase">Anciennes régions</span>
            </div>
            <div class="select-group-content" role="list">
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="1">Alsace</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="2">Aquitaine</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="3">Auvergne</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="4">Basse Normandie</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="5">Bourgogne</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="6">Bretagne</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="7">Centre</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="8">Champagne Ardenne</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="9">Franche Comté</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="10">Haute Normandie</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="11">Languedoc Roussillon</span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="12">Limousin</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="13">Lorraine</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="14">Midi Pyrénées</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="15">Nord pas de Calais</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="16">PACA</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="17">Pays de la Loire</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="18">Picardie</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="19">Poitou Charente</button></span>
              <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="20">Rhône Alpes</button></span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <button class="btn" onclick="setLivree();">Modifier</button>

    <br><br>

    <h1>Paramètres des mails</h1>
    <label for="param3">Recevoir des emails d'informations</label>
    <div class="options-control">
      <div class="options-item">
        <input type="radio" name="optionsRadio3" id="newsletterno" class="sr-only" onclick="modifParams();" checked>
        <label class="options-btn font-weight-medium" for="newsletterno">Non</label>
      </div>
      <div class="options-item">
        <input type="radio" name="optionsRadio3" id="newsletteryes" class="sr-only" onclick="modifParams();">
        <label class="options-btn font-weight-medium" for="newsletteryes">Oui</label>
      </div>
    </div>
    
    <br><br><br>
    
    <h1>Informations sur le compte</h1>
    <h2>Nombre de gares : <span id="gares_nbr"></span></h2>
    <h2>Nombre de trains : <span id="trains_nbr"></span></h2>
    <br><br>

    <div><center>
      <script type="text/javascript">
        atOptions = {
          'key' : 'c6ab1755c751b39c1d6ce2de57692456',
          'format' : 'iframe',
          'height' : 60,
          'width' : 468,
          'params' : {}
        };
        document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.varietyofdisplayformats.com/c6ab1755c751b39c1d6ce2de57692456/invoke.js"></scr' + 'ipt>');
      </script>
    </center></div>
  </div>

    <div class="footerbar">
        <center><a href=apropos.htm>&Agrave; propos</a> | <a href= cgu.htm>CGU</a> | <a href=mentionslegales.htm>Mentions légales</a> | <a href="donation.htm">Nous soutenir</a></center>
    </div>

    
</div>
<!-- Modal -->
<div class="modal fade" id="logout" tabindex="-1" role="dialog" aria-labelledby="lougout_title" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="h1 modal-title" id="logout_title">Se déconnecter</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        &Ecirc;tes-vous sûr de vouloir vous déconnecter ?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Non</button>
        <button type="button" class="btn btn-primary btn-danger" onclick="logout();">Oui</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" aria-labelledby="cookies_title" id="cookies">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="h1 modal-title" id="cookies_title">Vous connaissez la recette des cookies ?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Avant de continuer, nous aimerions vous signaler que ce site utilise des cookies afin de vous donner une meilleure expérience.</p>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="chg_password" tabindex="-1" role="dialog" aria-labelledby="chg_password_title" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="h1 modal-title" id="chg_password_title">Changer de mot de passe</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <label for="chg_password_old">Mot de passe actuel</label>
        <div class="form-control-container">
          <input type="password" class="form-control" id="chg_password_old" placeholder="Entrez votre mot de passe actuel">
          <span class="form-control-state"></span>
        </div><br>
        <label for="chg_password_text">Nouveau mot de passe</label>
        <div class="form-control-container">
          <input type="password" class="form-control" id="chg_password_text" placeholder="Entrez votre nouveau mot de passe">
          <span class="form-control-state"></span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-primary btn-danger" onclick="chgPass(document.getElementById('chg_password_old').value, document.getElementById('chg_password_text').value);" data-dismiss="modal">Valider</button>
      </div>
    </div>
  </div>
</div>

    
    <!-- SCRIPTS -->
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-auth.js"></script>
    <script src="scripts/jquery/jquery.js"></script>
    <script src="scripts/bootstrap-sncf-metier/bootstrap-sncf.min.js"></script>
    <script src="scripts/initialize.js"></script>
    <script src="scripts/login.js"></script>
    <script src="scripts/profile.js"></script>
    <script src="scripts/loader.js"></script>
    <script>
        if (localStorage.getItem('cookies_accepted') === undefined) {
            $('#cookies').modal('show');
        }
        
        $('#cookies').on('hidden.bs.modal', function (e) {
          localStorage.setItem('cookies_accepted', true);
        });
    </script>
</body>
</html>
