<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script src="scripts/apparence.js" type="text/javascript"></script>
    <link title="Light mode" href="scripts/bootstrap-sncf-metier/bootstrap-sncf.min.css" rel="stylesheet">
    <link title="Dark mode" href="scripts/bootstrap-sncf-metier/bootstrap-sncf.darkmode.min.css" rel="stylesheet alternate">
    <link rel="icon" href="images/favicon.png" size="16x16" type="image/png" />
    <link rel="icon" href="images/favicon.png" size="32x32" type="image/png" />

    <title>InfoGares</title>
</head>
<body onload="checkLogin();">
<div>
    <nav role="navigation" class="mastnav">
  <ul class="mastnav-top">
    <li>
        <a href="index.htm" class="mastnav-item">
            <i class="icons-arrow-prev icons-size-1x5" aria-hidden="true"></i>
            <span class="font-weight-medium">Accueil</span>
        </a>
    </li>
    <li>
      <a href="gares.htm" class="mastnav-item">
        <i class="icons-file icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Mes gares</span>
      </a>
    </li>
    <li>
      <a href="compte.htm" class="mastnav-item">
        <i class="icons-menu-account icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Mon profil</span>
      </a>
    </li>
    <li id="mnu_login">
      <a href="login.htm" class="mastnav-item">
        <i class="icons-circle-account-connected icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Se connecter</span>
      </a>
    </li>
    <li class="d-lg-none">
      <button type="button" class="mastnav-item options-menu-btn" data-component="state" data-state="active, active" data-behaviour="toggle, toggle" data-target=".options-menu-btn, .options-menu">
        <i class="icons-options icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Plus</span>
      </button>
    </li>
  </ul>
  <div class="mastnav-bottom d-none d-lg-block">
    <a href="#" class="mastnav-item mastnav-item-horizontal">
      <i class="icons-circle-reverse icons-size-1x5" aria-hidden="true"></i>
      <span class="font-weight-medium" onclick="toggleDarkmode();">Mode sombre</span>
    </a>
  </div>
</nav>
</div>

<div style="margin-bottom: 50px; margin-left: 150px; margin-right: 50px; margin-top: 50px;">

    <p class="text-primary pl-4 pt-2 pb-2 font-weight-medium" hidden=true id="created">
      <i class="icons-checked mr-2" aria-hidden="true"></i> Le train à bien été créé ! <a style="cursor: pointer;" onclick="window.location.reload();">Recharger la page</a>
    </p>
    
    <p class="text-primary pl-4 pt-2 pb-2 font-weight-medium" hidden=true id="modified">
      <i class="icons-checked mr-2" aria-hidden="true"></i> Le train à bien été modifié ! <a style="cursor: pointer;" onclick="window.location.reload();">Recharger la page</a>
    </p>

    <div id=actions>
        <div class="btn btn-primary" data-toggle="modal" data-target="#new_train">Nouveau train</div>
        <div class="btn btn-success" onclick="window.open('departs.htm'+document.location.search, '', 'height=500,width=750');">Afficher les départs</div>
    </div>
    <div id="trains_div" style="margin-top: 25px;">
        <ul class="list-group" id="trains" hidden=true>
            
        </ul>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="new_train_title" aria-hidden="true" id="new_train">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 id="new_train_title" class="h1 modal-title">Nouveau train</h5>
        <button type=button class="close" data-dismiss="modal" aria-label="Fermer"><span aria-hidde,=true>&times;</span></button>
      </div>
      <div class="modal-body">
        <label for="train_number">Numéro du train</label>
        <div class="form-control-container">
            <input type=number class="form-control" placeholder="Entrez le numéro du train" id="train_number" />
            <span class="form-control-state"></span>
        </div><br />
        <label for="train_dest">Destination</label>
        <div class="form-control-container">
            <input type=text class="form-control" placeholder="Entrez la gare de destination du train" id="train_dest" />
            <span class="form-control-state"></span>
        </div><br />
        <label for="train_type">Type de train</label>
        <div class="select-improved" data-component="select-exclusive">
          <div class="select-control">
            <div class="input-group" data-role="select-toggle">
              <p class="form-control is-placeholder  d-flex align-items-center" data-role="placeholder" data-selected-prefix="Sélection actuelle">Sélectionnez un type de train</p>
              <select class="sr-only" id="train_type" data-role="input" tabindex="-1" aria-hidden="true">
                <option selected data-role="default-hidden-option" disabled hidden>Sélectionnez un type de train</option>
                <option data-id="1" >TER</option>
                <option data-id="2" >TGV</option>
                <option data-id="3" >OuiGo</option>

              </select>
              <div class="input-group-append input-group-last">
                <button class="btn btn-primary btn-only-icon " data-role="btn" type="button" aria-expanded="false" aria-controls="selecttoggle">
                  <i class="icons-arrow-down icons-size-x75" aria-hidden="true"></i>
                  <span class="sr-only">Sélectionner</span>
                </button>
              </div>
            </div>
            <div class="select-menu" id="-selecttoggle">
              <div class="d-flex flex-column">
                <div class="flex-fluid overflow-y" role="list" data-role="menu">
                  <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="1">TER</button></span>
                  <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="2">TGV</button></span>
                  <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="3">OuiGo</button></span>
                </div>
              </div>
            </div>
          </div>
        </div><br />
        <label for="train_hour">Heure de départ</label>
        <div data-component="picker" data-mode="time" data-increment-hours-on-minutes-max>
          <div class="input-group" data-toggle>
            <div class="form-control-container">
              <input id="train_hour" tabindex="-1" type="text" class="form-control" placeholder="Sélectionner une heure" data-input>
              <span class="form-control-state"></span>
            </div>
            <div class="input-group-append">
              <button type="button" class="btn btn-primary btn-only-icon" data-role="btn" aria-expanded="false">
                <span class="sr-only">Saisir l’heure</span>
                <i class="icons-calendar-time" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div><br /><br />
        <label for="train_retard">Retard</label>
        <div class="form-control-container" id="train_retard">
            <div class="custom-control custom-radio custom-control-inline">
              <input type="radio" id="alheure" name="retards" class="custom-control-input">
              <label class="custom-control-label font-weight-medium" for="alheure">à l'heure</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
              <input type="radio" id="retindet" name="retards" class="custom-control-input">
              <label class="custom-control-label font-weight-medium" for="retindet">ret. indet.</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
                <input type=radio id="ret" name="retards" class="custom-control-input" />
                <label class="custom-control-label font-weight-medium" for="ret">retard</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
                <input type=radio id="supprime" name="retards" class="custom-control-input" />
                <label class="custom-control-label font-weight-medium" for="supprime">supprimé</label>
            </div>
        </div><br />
        <label for="retard_time">Temps de retard (applicable uniquement si 'retard' est séléctionné)</label>
        <div class="form-control-container">
            <input type=number id="retard_time" class="form-control" placeholder="Entrez le nombre de minutes de retard" />
            <span class="form-control-state"></span>
        </div><br />        
        <label for="train_voie">Voie de départ</label>
        <div class="form-control-container">
            <input type=text id="train_voie" class="form-control" placeholder="Entrez le numéro de la voie" />
            <span class="form-control-state"></span>
        </div><br />
        <label class="font-weight-medium mb-2" for="addreceivers1">Gares desservies</label>
        <div class="form-control-container form-chips-container" data-component="chips">
          <input data-role="typewriter" type="text" class="chips-input stretchy" id="addreceivers1" />
          <label class="font-weight-medium mb-2 sr-only" for="gares">Gares</label>
          <select class="sr-only" data-role="input" tabindex="-1" aria-hidden="true" id="gares" multiple>
          </select>
        </div><br />
        <button type=button class="btn btn-secondary" id="cancel" data-toggle="modal" data-target="#new_train">Annuler</button>&nbsp;<button type=submit class="btn btn-primary" id="validate" data-toggle="modal" data-target="#new_train" onclick="createTrain();">Créer</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" tabindex="-2" role="dialog" aria-labelledby="modif_train_title" aria-hidden="true" id="modif_train">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 id="modif_train_title" class="h1 modal-title">Modifier un train</h5>
        <button type=button class="close" data-dismiss="modal" aria-label="Fermer"><span aria-hidde,=true>&times;</span></button>
      </div>
      <div class="modal-body">
        <label for="modif_train_number">Numéro du train</label>
        <div class="form-control-container">
            <input type=number class="form-control" placeholder="Entrez le numéro du train" id="modif_train_number" />
            <span class="form-control-state"></span>
        </div><br />
        <label for="modif_train_dest">Destination</label>
        <div class="form-control-container">
            <input type=text class="form-control" placeholder="Entrez la gare de destination du train" id="modif_train_dest" />
            <span class="form-control-state"></span>
        </div><br />
        <label for="modif_train_type">Type de train</label>
        <div class="select-improved" data-component="select-exclusive">
          <div class="select-control">
            <div class="input-group" data-role="select-toggle">
              <p class="form-control is-placeholder  d-flex align-items-center" data-role="placeholder" data-selected-prefix="Sélection actuelle">Sélectionnez un type de train</p>
              <select class="sr-only" id="modif_train_type" data-role="input" tabindex="-1" aria-hidden="true">
                <option selected data-role="default-hidden-option" disabled hidden>Sélectionnez un type de train</option>
                <option data-id="1" >TER</option>
                <option data-id="2" >TGV</option>
                <option data-id="3" >OuiGo</option>

              </select>
              <div class="input-group-append input-group-last">
                <button class="btn btn-primary btn-only-icon " data-role="btn" type="button" aria-expanded="false" aria-controls="selecttoggle2">
                  <i class="icons-arrow-down icons-size-x75" aria-hidden="true"></i>
                  <span class="sr-only">Sélectionner</span>
                </button>
              </div>
            </div>
            <div class="select-menu" id="-selecttoggle2">
              <div class="d-flex flex-column">
                <div class="flex-fluid overflow-y" role="list" data-role="menu">
                  <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="1">TER</button></span>
                  <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="2">TGV</button></span>
                  <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="3">OuiGo</button></span>
                </div>
              </div>
            </div>
          </div>
        </div><br />
        <label for="modif_train_hour">Heure de départ</label>
        <div data-component="picker" data-mode="time" data-increment-hours-on-minutes-max>
          <div class="input-group" data-toggle>
            <div class="form-control-container">
              <input id="modif_train_hour" tabindex="-1" type="text" class="form-control" placeholder="Sélectionner une heure" data-input>
              <span class="form-control-state"></span>
            </div>
            <div class="input-group-append">
              <button type="button" class="btn btn-primary btn-only-icon" data-role="btn" aria-expanded="false">
                <span class="sr-only">Saisir l’heure</span>
                <i class="icons-calendar-time" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div><br /><br />
        <label for="modif_train_retard">Retard</label>
        <div class="form-control-container" id="modif_train_retard">
            <div class="custom-control custom-radio custom-control-inline">
              <input type="radio" id="modif_train_alheure" name="retards" class="custom-control-input">
              <label class="custom-control-label font-weight-medium" for="modif_train_alheure">à l'heure</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
              <input type="radio" id="modif_train_retindet" name="retards" class="custom-control-input">
              <label class="custom-control-label font-weight-medium" for="modif_train_retindet">ret. indet.</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
                <input type=radio id="modif_train_ret" name="retards" class="custom-control-input" />
                <label class="custom-control-label font-weight-medium" for="modif_train_ret">retard</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
                <input type=radio id="modif_train_suppr" name="retards" class="custom-control-input" />
                <label class="custom-control-label font-weight-medium" for="modif_train_suppr">supprimé</label>
            </div>
        </div><br />
        <label for="modif_train_retard_time">Temps de retard (applicable uniquement si 'retard' est séléctionné)</label>
        <div class="form-control-container">
            <input type=number id="modif_train_retard_time" class="form-control" placeholder="Entrez le nombre de minutes de retard" />
            <span class="form-control-state"></span>
        </div><br />        
        <label for="modif_train_voie">Voie de départ</label>
        <div class="form-control-container">
            <input type=text id="modif_train_voie" class="form-control" placeholder="Entrez le numéro de la voie" />
            <span class="form-control-state"></span>
        </div><br />
        <label class="font-weight-medium mb-2" for="addreceivers2">Gares desservies</label>
        <h2>Non pris en charge pour le moment !</h2>
        <!-- <div class="form-control-container form-chips-container" data-component="chips" id="chips" disabled>
          <input data-role="typewriter" type="text" class="chips-input stretchy" id="addreceivers2" />
          <label class="font-weight-medium mb-2 sr-only" for="modif_train_gares">Gares</label>
          <select class="sr-only" data-role="input" tabindex="-1" aria-hidden="true" id="modif_train_gares" multiple>
          </select>
        </div> !--><br />
        <button type=button class="btn btn-secondary" id="cancel2" data-toggle="modal" data-target="#modif_train">Annuler</button>&nbsp;<button type=submit class="btn btn-primary" id="validate2" data-toggle="modal" data-target="#modif_train">Modifier</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="del_train" tabindex="-1" role="dialog" aria-labelledby="del_dlg_title" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="h1 modal-title" id="del_dlg_title">Supprimer un train</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>



    <!-- SCRIPTS -->
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-auth.js"></script>
    <script src="scripts/jquery/jquery.js"></script>
    <script src="scripts/bootstrap-sncf-metier/bootstrap-sncf.min.js"></script>
    <script src="scripts/initialize.js"></script>
    <script src="scripts/login.js"></script>
    <script src="scripts/gare.js"></script>
    <script>
        firebase.auth().onAuthStateChanged(function(user) {
          if (user) {
            loadGare(user.uid);
          } else {

          }
        });
         
    </script>
</body>
</html>
