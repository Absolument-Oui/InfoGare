<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>InfoGare - Se connecter</title>
    <script src="scripts/apparence.js" type="text/javascript"></script>
    <link rel="Stylesheet" href="styles/Global.css" type="text/css" />
    <link title="Light mode" href="scripts/bootstrap-sncf-metier/bootstrap-sncf.min.css" rel="stylesheet">
    <link title="Dark mode" href="scripts/bootstrap-sncf-metier/bootstrap-sncf.darkmode.min.css" rel="stylesheet alternate">
    <link rel="icon" href="images/favicon.png" size="16x16" type="image/png" />
    <link rel="icon" href="images/favicon.png" size="32x32" type="image/png" />

</head>
<body onload="checkLogin();">
    <nav role="navigation" class="mastnav">
  <ul class="mastnav-top">
    <li>
        <a href="index.htm" class="mastnav-item">
            <i class="icons-large-building icons-size-1x5" aria-hidden="true"></i>
            <span class="font-weight-medium">Accueil</span>
        </a>
    </li>
    <li>
      <a href="gares.htm" class="mastnav-item">
        <i class="icons-file icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Mes gares</span>
      </a>
    </li>
    <li>
      <a href="compte.htm" class="mastnav-item">
        <i class="icons-menu-account icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Mon profil</span>
      </a>
    </li>
    <li id="mnu_login">
      <a href="#" class="mastnav-item active">
        <i class="icons-circle-account-connected icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Se connecter</span>
      </a>
    </li>
    <li class="d-lg-none">
      <button type="button" class="mastnav-item options-menu-btn" data-component="state" data-state="active, active" data-behaviour="toggle, toggle" data-target=".options-menu-btn, .options-menu">
        <i class="icons-options icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Plus</span>
      </button>
    </li>
  </ul>
  <div class="mastnav-bottom d-none d-lg-block">
    <a href="#" class="mastnav-item mastnav-item-horizontal">
      <i class="icons-circle-reverse icons-size-1x5" aria-hidden="true"></i>
      <span class="font-weight-medium" onclick="toggleDarkmode();">Mode sombre</span>
    </a>
  </div>
</nav>

<div class="main-content">

    <div class="form-error mb-3" id="error" hidden=true>
        <h2>Oups ! Il y a un problème !</h2>
        <ul class="mt-1 mb-0">
            <li id="checkemail" hidden=true>Veuillez vérifier votre adresse email.</li>
            <li id="checkusername" hidden=true>Veuillez vérifier que votre nom d'utilisateur ne comporte que des caractères alpha-numériques, des tirets-bas (_) ou des tirets (-).</li>
            <li id="checkpassword" hidden=true>Veuillez vérifier votre mot de passe.</li>
            <li id="emailexists" hidden=true>Cette adresse email est déjà utilisée.</li>
            <li id="passwordweak" hidden=true>Votre mot de passe est trop court.</li>
        </ul>
    </div>

    <div class="form-group" id=login>
        <label for="email">Adresse email</label>
        <div class="form-control-container ">
            <input type="email" class="form-control " id="email" title="Adresse email" placeholder="Adresse email" value="">
            <span class="form-control-state"></span>
        </div><br />
        <label for="password">Mot de passe</label>
        <div class="form-control-container">
            <input type=password class="form-control" id="password" title="Mot de passe" placeholder="Mot de passe" value="" />
            <span class="form-control-state"></span>
        </div><br />
        <span data-toggle="modal" data-target="#recover_pswd" style="cursor: pointer;">Mot de passe perdu ?</span><br><br>
        <button type="submit" class="btn btn-primary" onclick="login(document.getElementById('email').value, document.getElementById('password').value);">Se connecter</button>&nbsp;
        <span onclick="document.getElementById('signin').hidden=false; document.getElementById('login').hidden=true;" style="cursor: pointer;">Pas de compte ?</span>
    </div>
  
    <div class="form-group" id="signin" hidden=true>
        <label for="username">Nom d'utilisateur</label>
        <div class="form-control-container">
            <input type=text class="form-control" id="username" title="Nom d'utilisateur" placeholder="Nom d'utilisateur" value="" />
            <span class="form-control-state"></span>
        </div><br />
        <label for="email">Adresse email</label>
        <div class="form-control-container ">
            <input type="email" class="form-control " id="email1" title="Adresse email" placeholder="Adresse email" value="">
            <span class="form-control-state"></span>
        </div><br />
        <label for="password">Mot de passe</label>
        <div class="form-control-container">
            <input type=password class="form-control" id="password1" title="Mot de passe" placeholder="Mot de passe" value="" />
            <span class="form-control-state"></span>
        </div><br />
        <button type="submit" class="btn btn-primary" onclick="signin(document.getElementById('email1').value, document.getElementById('password1').value, document.getElementById('username').value);">S'inscrire</button>&nbsp;
        <span onclick="document.getElementById('signin').hidden=true; document.getElementById('login').hidden=false;" style="cursor: pointer;">Déjà un compte ?</span>
    </div>

    <script type="text/javascript">
      atOptions = {
        'key' : 'c6ab1755c751b39c1d6ce2de57692456',
        'format' : 'iframe',
        'height' : 60,
        'width' : 468,
        'params' : {}
      };
      document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.varietyofdisplayformats.com/c6ab1755c751b39c1d6ce2de57692456/invoke.js"></scr' + 'ipt>');
    </script>
    
    <div class="footerbar">
        <center><span>Logo par <a href="https://github.com/guerinlupus" target="_blank">guerinlupus</a> | Design par <a href="https://designmetier-bootstrap.sncf.fr/" target="_blank">SNCF</a> | Dev par <a href="https://github.com/Absolument-Oui" target="_blank">Absolument Oui</a></span></center>
        <center><a href=apropos.htm>&Agrave; propos</a> | <a href= cgu.htm>CGU</a> | <a href=mentionslegales.htm>Mentions légales</a> | <a href="donation.htm">Nous soutenir</a></center>
    </div>

</div>
<div class="modal" tabindex="-1" role="dialog" aria-labelledby="cookies_title" id="cookies">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="h1 modal-title" id="cookies_title">Vous connaissez la recette des cookies ?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Avant de continuer, nous aimerions vous signaler que ce site utilise des cookies afin de vous donner une meilleure expérience.</p>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="recover_pswd" tabindex="-1" role="dialog" aria-labelledby="recover_pswd_title" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="h1 modal-title" id="recover_pswd_title">Mot de passe perdu</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <label for="rec_email">Adresse email</label>
        <div class="form-control-container">
          <input type="email" class="form-control" id="rec_email" placeholder="Entrez votre adresse email">
          <span class="form-control-state"></span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-primary" onclick="sendPass(document.getElementById('rec_email').value);" data-dismiss="modal">Valider</button>
      </div>
    </div>
  </div>
</div>



    <!-- SCRIPTS -->
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-auth.js"></script>
    <script src="scripts/jquery/jquery.js"></script>
    <script src="scripts/bootstrap-sncf-metier/bootstrap-sncf.min.js"></script>
    <script src="scripts/initialize.js"></script>
    <script src="scripts/login.js"></script>
    <script>
        if (localStorage.getItem('cookies_accepted') === undefined) {
            $('#cookies').modal('show');
        }
        
        $('#cookies').on('hidden.bs.modal', function (e) {
          localStorage.setItem('cookies_accepted', true);
        });
    </script>

</body>
</html>
