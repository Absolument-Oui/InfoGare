<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>InfoGare - Gares</title>
    <script src="scripts/apparence.js" type="text/javascript"></script>
    <link rel="Stylesheet" href="styles/Global.css" type="text/css" />
    <link title="Light mode" href="scripts/bootstrap-sncf-metier/bootstrap-sncf.min.css" rel="stylesheet">
    <link title="Dark mode" href="scripts/bootstrap-sncf-metier/bootstrap-sncf.darkmode.min.css" rel="stylesheet alternate">
    <link rel="icon" href="images/favicon.png" size="16x16" type="image/png" />
    <link rel="icon" href="images/favicon.png" size="32x32" type="image/png" />


</head>
<body onload="checkLogin();">
    <nav role="navigation" class="mastnav">
  <ul class="mastnav-top">
    <li>
        <a href="index.htm" class="mastnav-item">
            <i class="icons-large-building icons-size-1x5" aria-hidden="true"></i>
            <span class="font-weight-medium">Accueil</span>
        </a>
    </li>
    <li>
      <a href="#" class="mastnav-item active">
        <i class="icons-file icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Mes gares</span>
      </a>
    </li>
    <li>
      <a href="compte.htm" class="mastnav-item">
        <i class="icons-menu-account icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Mon profil</span>
      </a>
    </li>
    <li id="mnu_login">
      <a href="login.htm" class="mastnav-item">
        <i class="icons-circle-account-connected icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Se connecter</span>
      </a>
    </li>
    <li class="d-lg-none">
      <button type="button" class="mastnav-item options-menu-btn" data-component="state" data-state="active, active" data-behaviour="toggle, toggle" data-target=".options-menu-btn, .options-menu">
        <i class="icons-options icons-size-1x5" aria-hidden="true"></i>
        <span class="font-weight-medium">Plus</span>
      </button>
    </li>
  </ul>
  <div class="mastnav-bottom d-none d-lg-block">
    <a href="#" class="mastnav-item mastnav-item-horizontal">
      <i class="icons-circle-reverse icons-size-1x5" aria-hidden="true"></i>
      <span class="font-weight-medium" onclick="toggleDarkmode();">Mode sombre</span>
    </a>
  </div>
</nav>

<div class="main-content">

    <p class="text-primary pl-4 pt-2 pb-2 font-weight-medium" id="gare_added" hidden=true>
      <i class="icons-checked mr-2" aria-hidden="true"></i> La gare à bien été créée ! <a onclick="window.location.reload();" style="cursor: pointer;">Recharger la page</a>
    </p>
    <p class="text-primary pl-4 pt-2 pb-2 font-weight-medium" id="gare_modified" hidden=true>
      <i class="icons-checked mr-2" aria-hidden="true"></i> La gare à bien été modifiée ! <a onclick="window.location.reload();" style="cursor: pointer;">Recharger la page</a>
    </p>
    <p class="text-danger pl-4 pt-2 pb-2 font-weight-medium" id="gare_del" hidden=true>
      La gare à bien été supprimée <a onclick="window.location.reload();" style="cursor: pointer;">Recharger la page</a>
    </p>
    

    <div id=actions>
        <div class="btn btn-primary" data-toggle="modal" data-target="#new_gare">Nouvelle gare</div>
    </div>
    <div id="gares_div" style="margin-top: 25px;">
        <ul class="list-group" id="gares" hidden=true>
            
        </ul>
    </div>
    <br><br>

    <div><center>
      <script type="text/javascript">
        atOptions = {
          'key' : 'c6ab1755c751b39c1d6ce2de57692456',
          'format' : 'iframe',
          'height' : 60,
          'width' : 468,
          'params' : {}
        };
        document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.varietyofdisplayformats.com/c6ab1755c751b39c1d6ce2de57692456/invoke.js"></scr' + 'ipt>');
      </script>
    </center></div>

    <div class="footerbar">
        <center><span>Logo par <a href="https://github.com/guerinlupus" target="_blank">guerinlupus</a> | Design par <a href="https://designmetier-bootstrap.sncf.fr/" target="_blank">SNCF</a> | Dev par <a href="https://github.com/Absolument-Oui" target="_blank">Absolument Oui</a></span></center>
        <center><a href=apropos.htm>&Agrave; propos</a> | <a href= cgu.htm>CGU</a> | <a href=mentionslegales.htm>Mentions légales</a> | <a href="donation.htm">Nous soutenir</a></center>
    </div>

</div>

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dlg_title" aria-hidden="true" id="new_gare">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="h1 modal-title" id="dlg_title" width="100%">Nouvelle gare</h5>
            <button type=button class="close" data-dismiss="modal" aria-label="Fermer"><span aria-hidden=true>&times;</span></button>
        </div>
        <div class="modal-body">
            <label for="gare_name">Nom de la gare</label>
            <div class="form-control-container">
                <input type=text class="form-control" placeholder="Nom de la gare" id="gare_name" />
                <span class="form-control-state"></span>
            </div><br />
            <label for="gare_type">Type de gare</label>
            <div class="select-improved" data-component="select-exclusive">
              <div class="select-control">
                <div class="input-group" data-role="select-toggle">
                  <p class="form-control is-placeholder  d-flex align-items-center" data-role="placeholder" data-selected-prefix="Sélection actuelle">Sélectionnez un type de train</p>
                  <select class="sr-only" id="gare_type" data-role="input" tabindex="-1" aria-hidden="true">
                    <option selected data-role="default-hidden-option" disabled hidden>Sélectionnez un type de gare</option>
                    <option data-id="1" >neutral</option>
                    <option data-id="2" >RER</option>

                  </select>
                  <div class="input-group-append input-group-last">
                    <button class="btn btn-primary btn-only-icon " data-role="btn" type="button" aria-expanded="false" aria-controls="selecttoggle">
                      <i class="icons-arrow-down icons-size-x75" aria-hidden="true"></i>
                      <span class="sr-only">Sélectionner</span>
                    </button>
                  </div>
                </div>
                <div class="select-menu" id="-selecttoggle">
                  <div class="d-flex flex-column">
                    <div class="flex-fluid overflow-y" role="list" data-role="menu">
                      <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="1">Gare normale</button></span>
                      <span class="select-menu-item" role="listitem"><button type="button" data-role="value" data-target="2">Gare RER</button></span>
                    </div>
                  </div>
                </div>
              </div>
            </div><br />
            <label for="gare_infos">Texte d'informations</label>
            <div class="form-control-container">
              <textarea class="form-control stretchy" id="gare_infos" placeholder="Entrez les informations pour cette gare" ZgotmplZ></textarea>
              <span class="form-control-state"></span>
            </div><br />
            <button class="btn btn-secondary" data-toggle="modal" data-target="#new_gare">Annuler</button>&nbsp;<button class="btn btn-primary" type=submit onclick="createGare(document.getElementById('gare_name').value);" data-toggle="modal" data-target="#new_gare">Créer</button>
        </div>
    </div>
  </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modif_dlg_title" aria-hidden="true" id="modif_gare">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="h1 modal-title" id="modif_dlg_title" width="100%">Modifier la gare gare</h5>
            <button type=button class="close" data-dismiss="modal" aria-label="Fermer"><span aria-hidden=true>&times;</span></button>
        </div>
        <div class="modal-body">
            <label for="modif_gare_name">Nom de la gare</label>
            <div class="form-control-container">
                <input type=text class="form-control" placeholder="Nom de la gare" id="modif_gare_name" />
                <span class="form-control-state"></span>
            </div><br />
            <label for="modif_gare_type">Type de gare</label>
            <p id="modif_gare_type">Impossible de changer de type de gare. Recréez-en une nouvelle à la place</p>
            <label for="modif_gare_infos">Texte d'informations</label>
            <div class="form-control-container">
              <textarea class="form-control stretchy" id="modif_gare_infos" placeholder="Entrez les informations pour cette gare" ZgotmplZ></textarea>
              <span class="form-control-state"></span>
            </div><br />

            <button class="btn btn-secondary" data-toggle="modal" data-target="#modif_gare">Annuler</button>&nbsp;<button class="btn btn-primary" data-toggle="modal" data-target="#modif_gare" id="modify_gare_btn">Modifier</button>
        </div>
    </div>
  </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="share_dlg_title" aria-hidden="true" id="share">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="h1 modal-title" id="share_dlg_title" width="100%">Partager la gare</h5>
            <button type=button class="close" data-dismiss="modal" aria-label="Fermer"><span aria-hidden=true>&times;</span></button>
        </div>
        <div class="modal-body">
          <label>Partager la gare</label><br>
          <label for="share_public" class="switch-control">
            <span class="sr-only">Activer/désactiver le partage</span>
            <input type="checkbox" id="share_public" class="sr-only" onchange="createGareLink();">
            <span class="switch-control-slider"></span>
          </label>
          <br><br>
          <label for="share_link">Lien de la gare</label>
          <div class="form-control-container">
            <input type="url" class="form-control" id="share_link" readonly>
            <span class="control-state"></span>
          </div><br>
          <label for="qr">QR Code de la gare</label>
          <center><img id="qr"></center>
          <br>
          <button class="btn btn-secondary" data-toggle="modal" data-target="#share">Annuler</button>&nbsp;<button class="btn btn-primary" data-toggle="modal" data-target="#share" id="share_validate">Modifier</button>
        </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="del" tabindex="-1" role="dialog" aria-labelledby="del_dlg_title" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="h1 modal-title" id="del_dlg_title">Supprimer la gare</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Êtes-vous sûr de vouloir supprimer la gare de <span id="del_gare_name"></span> ?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Non</button>
        <button type="button" class="btn btn-primary btn-danger" onclick="delGare(getGare());" data-dismiss="modal">Oui</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" aria-labelledby="cookies_title" id="cookies">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="h1 modal-title" id="cookies_title">Vous connaissez la recette des cookies ?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Avant de continuer, nous voulons vous signaler que ce site utilise des cookies afin de vous donner une meilleure expérience.</p>
      </div>
    </div>
  </div>
</div>



    <!-- SCRIPTS -->
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-auth.js"></script>
    <script src="scripts/jquery/jquery.js"></script>
    <script src="scripts/bootstrap-sncf-metier/bootstrap-sncf.min.js"></script>
    <script src="scripts/initialize.js"></script>
    <script src="scripts/login.js"></script>
    <script src="scripts/gare.js"></script>
    <script src="scripts/qrcode.js"></script>
    <script>
        if (localStorage.getItem('cookies_accepted') === undefined) {
            $('#cookies').modal('show');
        }
        
        $('#cookies').on('hidden.bs.modal', function (e) {
          localStorage.setItem('cookies_accepted', true);
        });
    </script>
    <script>
            firebase.auth().onAuthStateChanged(function(user) {
              if (user) {
                loadGares(user.uid);
                setUid(user.uid);
              } else {

              }
            });

    </script>

</body>
</html>
